(()=>{const e=document.querySelector("[data-about-us-btn]"),t=document.querySelector("[data-about-us-dialog]"),d=document.querySelector("[data-radar]");document.querySelector("[data-loading-prog]");chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=document.querySelector("[data-videos-list]"),n=chrome.tabs.connect(e[0].id,{name:"subtitles"});let i,o=0;i=setInterval((()=>{if(2===o){if(0===t.childElementCount){const e=document.createElement("li");e.classList.add("videos-list__item-msg"),e.textContent="No videos are found",t.id="not-found-item",t.appendChild(e),t.ariaBusy=!1}return d.remove(),clearInterval(i)}o++,n.postMessage({type:"initial"})}),400);let a=[];n.onMessage.addListener((function(e){if("initial"===e.type){const{id:d,platform:i,videosLength:o,videosTitle:s,activatedVideos:c,icon:r}=e;if(0===o||a.find((({id:e})=>e==e)))return;a.push({id:d,videosLength:o}),document.querySelector("#not-found-item")?.remove();for(let e=0;e<o;e++){const o=document.createElement("li"),a=document.createElement("img");a.src=r??"../images/any-video.png",a.width=32,a.height=32;const l=document.createElement("div"),m=document.createElement("h3");let u;m.textContent=s[e],m.classList.add("videos-list__item__title"),m.title=s[e],c[e]&&(u=document.createElement("span"),u.innerHTML="&#x2713;",u.classList.add("videos-list__item__checkmark"),u.dataset.checkmark=!0);const v=document.createElement("p");v.textContent=`platform: ${i}`,l.append(m,v),o.classList.add("videos-list__item"),o.dataset.video=e,o.dataset.id=d,o.addEventListener("mouseover",(t=>{n.postMessage({type:"videoHover",id:d,videoIndex:e})})),o.addEventListener("mouseout",(t=>{n.postMessage({type:"removeVideoHover",id:d,videoIndex:e})})),o.addEventListener("click",(t=>{if(n.postMessage({type:"videoChosen",id:d,videoIndex:e}),!o.querySelector("[data-checkmark]")){const e=document.createElement("span");e.innerHTML="&#x2713;",e.classList.add("videos-list__item__checkmark"),e.dataset.checkmark=!0,o.append(e)}window.close()})),u&&o.append(u),o.append(a,l),t.appendChild(o)}}}))})),e.addEventListener("click",(e=>{t.showModal()})),window.addEventListener("click",(e=>{e.target===t&&t.close()}))})();